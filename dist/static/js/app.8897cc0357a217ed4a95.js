webpackJsonp([1],{"/YY7":function(t,e){},"2zAo":function(t,e){},"9KWY":function(t,e){},"9n10":function(t,e){},Dil7:function(t,e){},KcXd:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a=i("Dd8w"),s=i.n(a),r=i("NYxO"),o={name:"BaseLoading",computed:s()({},Object(r.d)(["globalLoading"]))},c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.globalLoading,expression:"globalLoading"}],staticClass:"base-loading"},[this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrap"},[e("div",{staticClass:"spinner"},[e("div",{staticClass:"double-bounce1"}),this._v(" "),e("div",{staticClass:"double-bounce2"})]),this._v(" "),e("p",[this._v("正在拼命加载中.....")])])}]};var l={name:"App",components:{BaseLoading:i("VU/8")(o,c,!1,function(t){i("dMs6")},"data-v-61b9cf6a",null).exports},data:function(){return{}},mounted:function(){}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),e("base-loading")],1)},staticRenderFns:[]};var d=i("VU/8")(l,u,!1,function(t){i("w9qs")},"data-v-41ddf07c",null).exports,h=i("/ocq"),v={name:"TopHeader",mounted:function(){},computed:s()({},Object(r.d)(["city"]),Object(r.b)(["doubleCity"]))},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("div",{staticClass:"header-left"}),t._v(" "),i("div",{staticClass:"header-input"},[i("input",{attrs:{placeholder:"输入城市/景点/游玩主题",type:"text"}}),t._v(" "),i("base-icon",{staticClass:"header-icon-search",attrs:{iconText:"icon-sousuo"}})],1),t._v(" "),i("div",{staticClass:"header-right",on:{click:function(e){t.$router.push("/city")}}},[t._v("\n    "+t._s(t.city)+"\n    "),i("base-icon",{attrs:{iconText:"icon-jiantou"}})],1)])},staticRenderFns:[]};var p=i("VU/8")(v,m,!1,function(t){i("KcXd")},null,null).exports,f={name:"HomeSwiper",props:{swiper:{type:Array,required:!0}},data:function(){return{swiperOption:{pagination:{el:".swiper-pagination"},loop:!0,autoplay:{delay:2500,disableOnInteraction:!1}}}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home-swiper"},[e("swiper",{attrs:{options:this.swiperOption}},[this._l(this.swiper,function(t){return e("swiper-slide",{key:t.id},[e("img",{attrs:{src:t.imgUrl,alt:""}})])}),this._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},staticRenderFns:[]};var g=i("VU/8")(f,y,!1,function(t){i("2zAo")},"data-v-91c10026",null).exports,_={name:"HomeCategory",props:{iconList:{type:Array,required:!0}},computed:{pages:function(){var t=[];return this.iconList.forEach(function(e,i){var n=Math.floor(i/8);t[n]||(t[n]=[]),t[n].push(e)}),t}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-category"},[i("swiper",t._l(t.pages,function(e,n){return i("swiper-slide",{key:n},[i("div",{staticClass:"category-container"},t._l(e,function(e){return i("div",{key:e.id,staticClass:"item"},[i("img",{staticClass:"item-img",attrs:{src:e.imgUrl,alt:""}}),t._v(" "),i("p",[t._v(t._s(e.desc))])])}))])}))],1)},staticRenderFns:[]};var w=i("VU/8")(_,C,!1,function(t){i("ubYT")},"data-v-cc301220",null).exports,b={name:"HomeHotSales",props:{homeHotSaleList:{type:Array,required:!0}}},H={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hot-sales"},[i("div",{staticClass:"title"},[t._v("\n    热销推荐\n  ")]),t._v(" "),i("ul",{staticClass:"hot-sales-content"},t._l(t.homeHotSaleList,function(e){return i("router-link",{key:e.id,staticClass:"hot-sales-item",attrs:{tag:"li",to:"/detail/"+e.id}},[i("div",{staticClass:"left-img"},[i("img",{attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),i("div",{staticClass:"right-text"},[i("h3",{staticClass:"text-title"},[t._v(t._s(e.title))]),t._v(" "),i("p",{staticClass:"text-content"},[t._v(t._s(e.desc))]),t._v(" "),i("p",{staticClass:"text-detail"},[t._v("查看详情")])])])}))])},staticRenderFns:[]};var L=i("VU/8")(b,H,!1,function(t){i("qPwD")},"data-v-30031a1d",null).exports,k={name:"HomeWeekend",props:{weekendList:{type:Array,required:!0}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-weekend"},[i("div",{staticClass:"title"},[t._v("\n    周末去哪儿\n  ")]),t._v(" "),t._l(t.weekendList,function(e){return i("div",{key:e.id,staticClass:"weekend-item"},[i("div",{staticClass:"item-img"},[i("img",{attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),i("p",{staticClass:"item-title"},[t._v(t._s(e.title))]),t._v(" "),i("p",{staticClass:"item-content"},[t._v(t._s(e.desc))])])})],2)},staticRenderFns:[]};var $=i("VU/8")(k,x,!1,function(t){i("PWRy")},"data-v-296911c0",null).exports,S=i("//Fk"),I=i.n(S),E=i("mvHQ"),O=i.n(E),T=function(t){var e=localStorage.getItem(t);return JSON.parse(e)},F=function(t,e){var i=O()(e);localStorage.setItem(t,i)},U="上海";try{var q=T("city");q&&(U=q)}catch(t){}var R={city:U,globalLoading:!1},B={changeCity:function(t,e){t.city=e;var i=F;try{i("city",e)}catch(t){}},isShowGlobalLoading:function(t,e){t.globalLoading=e}};n.a.use(r.a);var N=new r.a.Store({state:R,mutations:B,getters:{doubleCity:function(t){return t.city+" "+t.city}}}),V=i("mtWM"),A="https://easy-mock.com/mock/5b2e15c2d901cc25e7df4e0c",G="/travel",D=i.n(V).a.create({baseURL:""+A+G,timeout:8e3});D.interceptors.request.use(function(t){return N.commit("isShowGlobalLoading",!0),"post"===t.method.toLowerCase()&&(t.headers={"Content-Type":"application/x-www-from-urlencoded"}),t},function(t){return I.a.reject(t)}),D.interceptors.response.use(function(t){return N.commit("isShowGlobalLoading",!1),t.data},function(t){return I.a.reject(t)});var P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return function(i,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};D({method:e,url:t,data:i}).then(function(t){return n(t)},function(t){return a(t)})}},j=P("/home","post"),M=P("/city","post"),Y=P("/detail","post"),W={name:"Home",data:function(){return{swiper:[],iconList:[],homeHotSaleList:[],weekendList:[]}},components:{HomeHeader:p,HomeSwiper:g,HomeCategory:w,HomeSales:L,HomeWeek:$},mounted:function(){this.getList()},methods:{getList:function(){var t=this;j({},function(e){var i=e.data;t.swiper=i.swiperList,t.iconList=i.iconList,t.homeHotSaleList=i.recommendList,t.weekendList=i.weekendList})}}},z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("HomeHeader"),t._v(" "),i("HomeSwiper",{attrs:{swiper:t.swiper}}),t._v(" "),i("HomeCategory",{attrs:{iconList:t.iconList}}),t._v(" "),i("HomeSales",{attrs:{homeHotSaleList:t.homeHotSaleList}}),t._v(" "),i("HomeWeek",{attrs:{weekendList:t.weekendList}})],1)},staticRenderFns:[]};var K=i("VU/8")(W,z,!1,function(t){i("z7v2")},null,null).exports,Q=i("fZjL"),X=i.n(Q),Z=i("GQaK"),J={name:"CityHeader",props:{cities:{type:Object,require:!0}},data:function(){return{keywords:"",list:[]}},mounted:function(){this.$bus.$emit("cityHeaderHeight",this.$refs.cityHeader.clientHeight),this.scroll=new Z.a(this.$refs.wrapper)},computed:{noMatch:function(){return!this.list.length}},methods:s()({handleCityClick:function(t){this.changeCity(t),this.$router.push("/home")}},Object(r.c)(["changeCity"])),watch:{keywords:function(t){var e=this;this.list=[],clearInterval(this.timer),this.timer=setTimeout(function(){for(var i in e.cities)e.cities.hasOwnProperty(i)&&e.cities[i].map(function(i){(i.spell.indexOf(t)>-1||i.name.indexOf(t)>-1)&&e.list.push(i)})},100)}}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cityHeader",staticClass:"city-header"},[i("div",{staticClass:"city-header-top"},[i("base-icon",{staticClass:"city-back",attrs:{iconText:"icon-4"},nativeOn:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("h2",[t._v("城市选择")])],1),t._v(" "),i("div",{staticClass:"city-header-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"输入城市名或拼音"},domProps:{value:t.keywords},on:{input:function(e){e.target.composing||(t.keywords=e.target.value)}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.keywords,expression:"keywords"}],ref:"wrapper",staticClass:"city-content"},[i("ul",[t._l(t.list,function(e){return i("li",{key:e.id,staticClass:"city-list",on:{click:function(i){t.handleCityClick(e.name)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.noMatch,expression:"noMatch"}],staticClass:"city-list"},[t._v("没有找到匹配数据")])],2)])])},staticRenderFns:[]};var et=i("VU/8")(J,tt,!1,function(t){i("Dil7")},"data-v-2bea1185",null).exports,it={props:{cities:{type:Object,required:!0},hotCities:{type:Array,required:!0},position:{type:String,required:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.initScroll()})},computed:{calculateHeight:function(){for(var t=[],e=document.querySelector(".city-current"),i=document.querySelector(".city-hot"),n=e.clientHeight+i.clientHeight,a=document.querySelectorAll(".city-content"),s=0;s<a.length;s++)t.push(n),n+=a[s].clientHeight;return t},currentCity:function(){return this.$store.state.city}},watch:{position:function(t){if(t){var e=this.$refs[t];this.scroll.scrollToElement(e[0],200,0,0)}}},methods:{initScroll:function(){this.scroll=new Z.a(this.$refs.wrapper,{probeType:3}),this.scroll.on("scroll",this.onScroll)},onScroll:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){for(var i=-t.y,n=0;n<e.calculateHeight.length;n++){if(i<Math.floor(e.calculateHeight[n]-3))return void e.$emit("letterScroll",n-2);i>e.calculateHeight[e.calculateHeight.length-1]-3&&e.$emit("letterScroll",n-1)}},16)},handleCityClick:function(t){this.$store.commit("changeCity",t),this.$router.push("/home")}}},nt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wrapper",staticClass:"city-list"},[i("div",{staticClass:"content"},[i("div",{staticClass:"city-current"},[i("h2",{staticClass:"city-title"},[t._v("当前城市")]),t._v(" "),i("div",{staticClass:"city-box"},[i("p",[t._v(t._s(t.currentCity))])])]),t._v(" "),i("div",{staticClass:"city-hot"},[i("div",{staticClass:"city-title"},[t._v("\n        热门城市\n      ")]),t._v(" "),i("div",{staticClass:"city-box"},t._l(t.hotCities,function(e){return i("p",{key:e.id,on:{click:function(i){t.handleCityClick(e.name)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))]),t._v(" "),t._l(t.cities,function(e,n){return i("div",{key:n,ref:n,refInFor:!0,staticClass:"city-content"},[i("div",{staticClass:"city-title"},[t._v(t._s(n))]),t._v(" "),t._l(e,function(e){return i("div",{key:e.id,staticClass:"city-content-list",on:{click:function(i){t.handleCityClick(e.name)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})],2)})],2)])},staticRenderFns:[]};var at=i("VU/8")(it,nt,!1,function(t){i("r0C7")},"data-v-3d95d316",null).exports,st={name:"CityLetter",props:{letterList:{type:Array,required:!0},activeIndex:{type:Number,required:!0}},data:function(){return{cityHeaderHeight:0,startHeight:0,liHeight:0}},created:function(){var t=this;this.$bus.$on("cityHeaderHeight",function(e){t.cityHeaderHeight=e})},updated:function(){var t=this.$refs.A[0];this.liHeight=t.clientHeight,this.startHeight=t.offsetTop+this.cityHeaderHeight},methods:{handleClick:function(t){this.$emit("letterPosition",t)},touchstart:function(){this.touchStatus=!0},touchmove:function(t){var e=this;this.touchStatus&&(this.timer&&clearTimeout(this.clearTimeout),this.timer=setTimeout(function(){var i=t.changedTouches[0],n=Math.floor((i.clientY-e.startHeight)/e.liHeight);n>=0&&n<e.letterList.length&&e.$emit("letterPosition",e.letterList[n])},16))},touchend:function(){this.touchStatus=!1}}},rt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-letter"},[i("ul",t._l(t.letterList,function(e,n){return i("li",{key:n,ref:e,refInFor:!0,class:{active:n===t.activeIndex},on:{click:function(i){t.handleClick(e)},touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[t._v("\n      "+t._s(e)+"\n    ")])}))])},staticRenderFns:[]};var ot={name:"City",components:{CityHeader:et,CityList:at,CityLetter:i("VU/8")(st,rt,!1,function(t){i("iSQH")},"data-v-144ca16a",null).exports},data:function(){return{cities:{},hotCities:[],letterList:[],position:"",activeIndex:-1}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;M({},function(e){t.cities=e.data.cities,t.hotCities=e.data.hotCities,t.letterList=X()(t.cities)})},letterPosition:function(t){this.position=t}}},ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city"},[i("CityHeader",{attrs:{cities:t.cities}}),t._v(" "),i("CityList",{attrs:{hotCities:t.hotCities,cities:t.cities,position:t.position},on:{letterScroll:function(e){t.activeIndex=e}}}),t._v(" "),i("CityLetter",{attrs:{letterList:t.letterList,activeIndex:t.activeIndex},on:{letterPosition:t.letterPosition}})],1)},staticRenderFns:[]};var lt=i("VU/8")(ot,ct,!1,function(t){i("/YY7")},"data-v-c78ca156",null).exports,ut={name:"DetailBanner",props:{gallaryImgs:{type:Array,required:!0},sightName:{type:String,required:!0},bannerImg:{type:String,required:!0}},data:function(){return{isShowGallary:!1,bannerIconOpactiy:1}},mounted:function(){this.getBannerHeight(),this.getBackIconOpacity()},methods:{onChange:function(){this.isShowGallary=!1},getBannerHeight:function(){var t=this.$refs.detailBanner.clientHeight/2;this.$bus.$emit("getBannerHeight",t)},getBackIconOpacity:function(){var t=this;this.$bus.$on("bannerIconOpactiy",function(e){t.bannerIconOpactiy=e})}}},dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"detailBanner",staticClass:"detail-banner"},[i("div",{staticClass:"banner-content",on:{click:function(e){t.isShowGallary=!0}}},[i("router-link",{staticClass:"banner-back",attrs:{tag:"div",to:"/"}},[i("base-icon",{style:{opacity:t.bannerIconOpactiy},attrs:{"icon-text":"icon-4"}})],1),t._v(" "),i("img",{attrs:{src:t.bannerImg,alt:""}}),t._v(" "),i("div",{staticClass:"banner-footer"},[i("span",{staticClass:"banner-title"},[t._v(t._s(t.sightName))]),t._v(" "),i("span",{staticClass:"picture-num"},[i("base-icon",{staticClass:"icon-img",attrs:{"icon-text":"icon-tupian"}}),t._v("\n        "+t._s(t.gallaryImgs.length)+"\n      ")],1)])],1),t._v(" "),i("base-gallary",{directives:[{name:"show",rawName:"v-show",value:t.isShowGallary,expression:"isShowGallary"}],attrs:{swiper:t.gallaryImgs},on:{change:t.onChange}})],1)},staticRenderFns:[]};var ht=i("VU/8")(ut,dt,!1,function(t){i("9KWY")},"data-v-03329162",null).exports,vt={name:"DetailHeader",data:function(){return{opacity:0,detailBannerHeight:0}},methods:{onScroll:function(){var t=document.documentElement.scrollTop,e=1,i=this.detailBannerHeight;t<i&&(this.opacity=t/i,e=(i-t)/i,this.$bus.$emit("bannerIconOpactiy",e))},getBannerHeight:function(){var t=this;this.$bus.$on("getBannerHeight",function(e){t.detailBannerHeight=e})}},mounted:function(){this.getBannerHeight(),window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},mt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.opacity,expression:"opacity"}],staticClass:"detail-header",style:{opacity:t.opacity}},[i("base-icon",{staticClass:"detail-header-icon",attrs:{"icon-text":"icon-4"},nativeOn:{click:function(e){t.$router.go(-1)}}}),t._v("\n  景点详情\n")],1)},staticRenderFns:[]};var pt=i("VU/8")(vt,mt,!1,function(t){i("yEkU")},"data-v-02656c1d",null).exports,ft={name:"DetailList",props:{detailList:{type:Array,required:!0}},data:function(){return{}}},yt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-list"},t._l(t.detailList,function(e,n){return i("div",{key:n,staticClass:"list-item"},[i("div",{staticClass:"list-content"},[i("base-icon",{staticClass:"list-icon",attrs:{"icon-text":"icon-paper"}}),t._v(" "),i("div",{staticClass:"list-text"},[t._v(t._s(e.title))])],1),t._v(" "),e.children?i("detail-list",{attrs:{detailList:e.children}}):t._e()],1)}))},staticRenderFns:[]};var gt={name:"Detail",components:{DetailHeader:pt,DetailBanner:ht,DetailList:i("VU/8")(ft,yt,!1,function(t){i("eu5i")},"data-v-efa741e6",null).exports},data:function(){return{detailList:[],gallaryImgs:[],sightName:"",bannerImg:""}},mounted:function(){var t=this;Y({},function(e){t.detailList=e.data.categoryList,t.gallaryImgs=e.data.gallaryImgs,t.sightName=e.data.sightName,t.bannerImg=e.data.bannerImg})}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"detail"},[e("detail-header"),this._v(" "),e("detail-banner",{attrs:{gallaryImgs:this.gallaryImgs,sightName:this.sightName,bannerImg:this.bannerImg}}),this._v(" "),e("detail-list",{attrs:{"detail-list":this.detailList}})],1)},staticRenderFns:[]};var Ct=i("VU/8")(gt,_t,!1,function(t){i("OrXZ")},"data-v-73856fa5",null).exports;n.a.use(h.a);var wt=[{path:"/",component:K,redirect:"/home"},{path:"/home",component:K,name:"首页"},{path:"/city",component:lt,name:"城市选择"},{path:"/detail/:id",component:Ct,name:"详情"}],bt=new h.a({routes:wt}),Ht=i("v5o6"),Lt=i.n(Ht),kt=(i("QKTF"),i("7QTg")),xt=i.n(kt),$t=(i("v2ns"),i("9n10"),i("szwE"),{name:"BaseIcon",props:{iconText:{type:String,required:!0}},computed:{handleIconText:function(){return"#"+this.iconText}}}),St={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-icon"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":this.handleIconText}})])])},staticRenderFns:[]};var It=i("VU/8")($t,St,!1,function(t){i("zHFm")},"data-v-385d9d40",null).exports,Et={name:"BaseGallary",props:{swiper:{type:Array,required:!0}},data:function(){return{swiperOption:{pagination:{el:".swiper-pagination",type:"fraction"},observer:!0,observeParents:!0}}},methods:{hiddenGallary:function(t){"Gallary"===t.target.className&&this.$emit("change")}}},Ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Gallary",on:{click:function(e){t.hiddenGallary(e)}}},[i("div",{staticClass:"container"},[i("swiper",{attrs:{options:t.swiperOption}},[t._l(t.swiper,function(t){return i("swiper-slide",{key:t.id},[i("img",{attrs:{src:t.imgUrl,alt:""}})])}),t._v(" "),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)])},staticRenderFns:[]};var Tt=i("VU/8")(Et,Ot,!1,function(t){i("rFT3")},"data-v-65a25507",null).exports;Lt.a.attach(document.body),n.a.use(xt.a),n.a.prototype.$bus=new n.a,n.a.component("base-icon",It),n.a.component("base-gallary",Tt),n.a.config.productionTip=!1,new n.a({router:bt,store:N,render:function(t){return t(d)}}).$mount("#app")},OrXZ:function(t,e){},PWRy:function(t,e){},dMs6:function(t,e){},eu5i:function(t,e){},iSQH:function(t,e){},qPwD:function(t,e){},r0C7:function(t,e){},rFT3:function(t,e){},szwE:function(t,e){},ubYT:function(t,e){},v2ns:function(t,e){},w9qs:function(t,e){},yEkU:function(t,e){},z7v2:function(t,e){},zHFm:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8897cc0357a217ed4a95.js.map